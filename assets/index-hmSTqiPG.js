import{u as $,r as j,n as q,o as z,x as G,j as c,s as J,M as U,Q as V,y as X}from"./index-6GbCzGdu.js";const Y={group:void 0,listbox:"option",menu:"menuitem",tree:"treeitem"};function P({activeElementId:f=null,children:d,disabled:r,id:D,items:i,label:L,leading:F,offsetOptions:N=4,arrowKeyNavigationCallback:p,itemOnClick:g,owner:T,placement:k="bottom",readOnly:E,role:o="listbox",scrollLimit:h,trailing:A,width:b="reference",onClose:x,hideWhenClosed:B=!1,...R}){const I=$(D),[n,_]=j.useState(!1),s=j.useMemo(()=>typeof i=="function"?i({show:n}):i,[i,n]),a=e=>{r||E||_(t=>(t&&!e&&(x==null||x()),typeof e=="function"?e(t):e))},{floatingStyles:H,elements:l,currentPlacement:K}=q({hide:!n,offsetOptions:N,placement:k,refWidth:b==="reference",strategy:"fixed"});z({elements:[l.floating,l.reference],callback:()=>a(!1),disabled:!n});const{activeElementId:y,setActiveElementId:w,arrowKeyCallbacks:Q}=G({ids:s.flatMap(e=>e.disabled?[]:e.id),callback:e=>(n||a(!0),typeof p=="function"&&p?p(e):!0)}),S=()=>{a(!1),w(null)},m=e=>{var t;if(e.preventDefault(),!n){a(!0);return}(t=X(y))==null||t.click()};return c.jsxs(c.Fragment,{children:[d({"aria-disabled":r||void 0,"aria-expanded":n,"aria-haspopup":n&&o!=="group"?o:void 0,"aria-controls":I,"aria-readonly":E||void 0,"aria-owns":I,"aria-activedescendant":n&&y||void 0,role:"combobox",tabIndex:0,onClick:e=>{var u;const t=!n;a(t),w(t&&(f||((u=s[0])==null?void 0:u.id))||null),e.preventDefault()},onKeyDownCapture:J({...Q,Enter:m,Space:m,Tab:S,Escape:S})},{setRef:l.setReference,toggleMenu:()=>a(!0),itemCount:s.length,reference:l.reference}),(!B||n)&&c.jsxs(U,{...R,"aria-label":L,as:"ul","data-placement":K,"data-scroll":!!h&&s.length>h,id:I,innerRef:e=>{l.setFloating(e)},owner:T,role:o,style:{width:b!=="reference"?b:void 0,...H,...Z(h,s.length)},children:[F,s.map((e,t)=>c.jsx(V,{as:"li",...e,active:y===e.id||void 0,onClick:u=>{var M,v;(M=l.reference)==null||M.focus(),w(e.id),(v=e==null?void 0:e.onClick)==null||v.call(e,u),g==null||g({event:u,currentId:e.id,show:n,setShow:a})},role:e.role||Y[o]||void 0,tabIndex:0},t)),A]})]})}const Z=(f,d)=>{const r=Number(f);return Number.isNaN(r)||r<=0||typeof d!="number"||r>d?{}:{display:"flex",flexDirection:"column",maxHeight:`calc(var(--list-item-height) * ${r})`,overflow:"hidden auto"}};export{P as ListItemMenu};
