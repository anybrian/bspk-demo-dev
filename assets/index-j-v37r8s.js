import{u as $,r as j,o as q,p as G,y as J,j as c,v as Q,M as U,R as V,z as X}from"./index-CP083ENv.js";const Y={group:void 0,listbox:"option",menu:"menuitem",tree:"treeitem"};function P({activeElementId:f=null,children:d,disabled:r,id:D,items:i,label:L,leading:F,offsetOptions:N=4,arrowKeyNavigationCallback:p,itemOnClick:g,owner:R,placement:T="bottom",readOnly:E,role:o="listbox",scrollLimit:h,trailing:k,width:b="reference",onClose:x,hideWhenClosed:A=!1,...B}){const I=$(D),[n,_]=j.useState(!1),s=j.useMemo(()=>typeof i=="function"?i({show:n}):i,[i,n]),a=e=>{r||E||_(t=>(t&&!e&&(x==null||x()),typeof e=="function"?e(t):e))},{floatingStyles:z,elements:l,currentPlacement:H}=q({hide:!n,offsetOptions:N,placement:T,refWidth:b==="reference",strategy:"fixed"});G({elements:[l.floating,l.reference],callback:()=>a(!1),disabled:!n});const{activeElementId:y,setActiveElementId:w,arrowKeyCallbacks:K}=J({ids:s.flatMap(e=>e.disabled?[]:e.id),callback:e=>(n||a(!0),typeof p=="function"&&p?p(e):!0)}),S=()=>{a(!1),w(null)},m=e=>{var t;if(e.preventDefault(),!n){a(!0);return}(t=X(y))==null||t.click()};return c.jsxs(c.Fragment,{children:[d({"aria-disabled":r||void 0,"aria-expanded":n,"aria-haspopup":n&&o!=="group"?o:void 0,"aria-controls":I,"aria-readonly":E||void 0,"aria-owns":I,"aria-activedescendant":n&&y||void 0,role:"combobox",tabIndex:0,onClick:e=>{var u;const t=!n;a(t),w(t&&(f||((u=s[0])==null?void 0:u.id))||null),e.preventDefault()},onKeyDownCapture:Q({...K,Enter:m,Space:m,Tab:S,Escape:S})},{setRef:l.setReference,toggleMenu:()=>a(!0),itemCount:s.length,reference:l.reference}),(!A||n)&&c.jsxs(U,{...B,"aria-label":L,as:"ul","data-placement":H,"data-scroll":!!h&&s.length>h,id:I,innerRef:e=>{l.setFloating(e)},owner:R,role:o,style:{width:b!=="reference"?b:void 0,...z,...Z(h,s.length)},children:[F,s.map((e,t)=>c.jsx(V,{as:"li",...e,active:y===e.id||void 0,onClick:u=>{var v,M;(v=l.reference)==null||v.focus(),w(e.id),(M=e==null?void 0:e.onClick)==null||M.call(e,u),g==null||g({event:u,currentId:e.id,show:n,setShow:a})},role:e.role||Y[o]||void 0,tabIndex:0},t)),k]})]})}const Z=(f,d)=>{const r=Number(f);return Number.isNaN(r)||r<=0||typeof d!="number"||r>d?{}:{display:"flex",flexDirection:"column",maxHeight:`calc(var(--list-item-height) * ${r})`,overflow:"hidden auto"}};export{P as ListItemMenu};
